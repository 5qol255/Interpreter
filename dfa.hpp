#ifndef DFA_HPP
#define DFA_HPP

#pragma once

#include "scanner.hpp"
#include <unordered_map>

using std::unordered_map;

static const unordered_map<int, TokenType> final_states = {
    {1, TokenType::ID},
    {2, TokenType::CONST_ID},
    {3, TokenType::CONST_ID},
    {4, TokenType::MUL},
    {5, TokenType::POWER},
    {6, TokenType::DIV},
    {7, TokenType::MINUS},
    {8, TokenType::PLUS},
    {9, TokenType::COMMA},
    {10, TokenType::SEMICO},
    {11, TokenType::L_BRACKET},
    {12, TokenType::R_BRACKET},
    {13, TokenType::COMMENT},
}; // 终态表

static const unordered_map<int, unordered_map<char, int>> state_transition_table = {
    {0, {
            {'0', 2},
            {'1', 2},
            {'2', 2},
            {'3', 2},
            {'4', 2},
            {'5', 2},
            {'6', 2},
            {'7', 2},
            {'8', 2},
            {'9', 2},
            {'*', 4},
            {'/', 6},
            {'-', 7},
            {'+', 8},
            {',', 9},
            {';', 10},
            {'(', 11},
            {')', 12},
            {'a', 1},
            {'b', 1},
            {'c', 1},
            {'d', 1},
            {'e', 1},
            {'f', 1},
            {'g', 1},
            {'h', 1},
            {'i', 1},
            {'j', 1},
            {'k', 1},
            {'l', 1},
            {'m', 1},
            {'n', 1},
            {'o', 1},
            {'p', 1},
            {'q', 1},
            {'r', 1},
            {'s', 1},
            {'t', 1},
            {'u', 1},
            {'v', 1},
            {'w', 1},
            {'x', 1},
            {'y', 1},
            {'z', 1},
            {'A', 1},
            {'B', 1},
            {'C', 1},
            {'D', 1},
            {'E', 1},
            {'F', 1},
            {'G', 1},
            {'H', 1},
            {'I', 1},
            {'J', 1},
            {'K', 1},
            {'L', 1},
            {'M', 1},
            {'N', 1},
            {'O', 1},
            {'P', 1},
            {'Q', 1},
            {'R', 1},
            {'S', 1},
            {'T', 1},
            {'U', 1},
            {'V', 1},
            {'W', 1},
            {'X', 1},
            {'Y', 1},
            {'Z', 1},
        }},
    {2, {
            {'.', 3},
            {'0', 2},
            {'1', 2},
            {'2', 2},
            {'3', 2},
            {'4', 2},
            {'5', 2},
            {'6', 2},
            {'7', 2},
            {'8', 2},
            {'9', 2},
        }},
    {1, {
            {'a', 1},
            {'b', 1},
            {'c', 1},
            {'d', 1},
            {'e', 1},
            {'f', 1},
            {'g', 1},
            {'h', 1},
            {'i', 1},
            {'j', 1},
            {'k', 1},
            {'l', 1},
            {'m', 1},
            {'n', 1},
            {'o', 1},
            {'p', 1},
            {'q', 1},
            {'r', 1},
            {'s', 1},
            {'t', 1},
            {'u', 1},
            {'v', 1},
            {'w', 1},
            {'x', 1},
            {'y', 1},
            {'z', 1},
            {'A', 1},
            {'B', 1},
            {'C', 1},
            {'D', 1},
            {'E', 1},
            {'F', 1},
            {'G', 1},
            {'H', 1},
            {'I', 1},
            {'J', 1},
            {'K', 1},
            {'L', 1},
            {'M', 1},
            {'N', 1},
            {'O', 1},
            {'P', 1},
            {'Q', 1},
            {'R', 1},
            {'S', 1},
            {'T', 1},
            {'U', 1},
            {'V', 1},
            {'W', 1},
            {'X', 1},
            {'Y', 1},
            {'Z', 1},
            {'0', 1},
            {'1', 1},
            {'2', 1},
            {'3', 1},
            {'4', 1},
            {'5', 1},
            {'6', 1},
            {'7', 1},
            {'8', 1},
            {'9', 1},
        }},
    {3, {
            {'0', 3},
            {'1', 3},
            {'2', 3},
            {'3', 3},
            {'4', 3},
            {'5', 3},
            {'6', 3},
            {'7', 3},
            {'8', 3},
            {'9', 3},
        }},
    {4, {
            {'*', 5},
        }},
    {6, {
            {'/', 13},
        }},
    {7, {
            {'-', 13},
        }},
}; // 状态转移表

int smove(int current_state, char c);      // 状态转移函数
TokenType get_final_state_type(int state); // 返回终态种类

#endif // DFA_HPP